var Workopolis=Workopolis||{};!function(e){"use strict";var t={keyboardKeys:{TAB:9,ENTER:13,SPACE:32,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40},attributeMapping:{button:{role:"button"},navigation:{role:"navigation"},search:{role:"search"},"expander-content":{"aria-expanded":"false","aria-hidden":"true"},"expander-trigger":{role:"button"},"hidden-element":{"aria-hidden":"true",tabindex:"-1"},"hidden-menu":{role:"menu","aria-hidden":"true",tabindex:"-1"},"hidden-menu-trigger":{role:"button","aria-expanded":"false"},presentation:{role:"presentation","aria-hidden":"true",tabindex:"-1"}},toggledAttributeMapping:{"expander-content":{"aria-expanded":"true","aria-hidden":"false"},"hidden-element":{"aria-hidden":"false",tabindex:"0"},"hidden-menu":{role:"menu","aria-hidden":"false",tabindex:"0"},"hidden-menu-trigger":{role:"button","aria-expanded":"true"}},lastFocusedEl:null,init:function(){this.applyARIA(),this.bindExpanders(),this.bindEscapeKey(),this.bindDropdownMenu()},applyARIA:function(){var t=this;for(var a in t.attributeMapping){var n=e('[data-a11y="'+a+'"]');n.each(function(){e(this).attr(t.attributeMapping[a])})}},bindEscapeKey:function(){var t=this;e("body").on("keydown",function(a){var n=a.which||a.keyCode;27===n&&(e(".is-active").removeClass("is-active"),t.lastFocus&&void 0!==t.lastFocus&&e(t.lastFocus).focus())})},bindExpanders:function(){var t=this;e('[data-a11y="expander-trigger"]').on("click keydown",function(a){var n=e(this),i=t.getElementBySelector(n.data("related-expander"));if(i&&t.isValidEventTrigger(a)){i.toggleClass("is-active"),i.attr(i.hasClass("is-active")?t.toggledAttributeMapping["expander-content"]:t.attributeMapping["expander-content"]),n.toggleClass("expanded");var r=i.find('[data-a11y="hidden-element"]');return r.attr(i.hasClass("is-active")?t.toggledAttributeMapping["hidden-element"]:t.attributeMapping["hidden-element"]),"undefined"!=typeof CommonDataLayer&&CommonDataLayer.expanderClickEvent(e(".expander-heading").text()),!1}})},bindDropdownMenu:function(){var t=this;e('[data-a11y="hidden-menu-trigger"]').on("keydown",function(a){var n=e(this),i=a.which||a.keyCode;switch(i){case t.keyboardKeys.DOWN:t.toggleMenuVisibility(n,!0);break;case t.keyboardKeys.ESCAPE:case t.keyboardKeys.UP:t.toggleMenuVisibility(n,!1)}})},toggleMenuVisibility:function(e,t){var a=e.parent(),n=a.find('[data-a11y="hidden-menu"]');n.attr(t?this.toggledAttributeMapping["hidden-menu"]:this.attributeMapping["hidden-menu"]),n.toggleClass("is-active")},updateOverlay:function(e){var t=this,a=e.find('[data-a11y="focus"]');e.attr(e.hasClass("is-active")?t.toggledAttributeMapping["hidden-element"]:t.attributeMapping["hidden-element"]),a&&void 0!==a&&(t.lastFocus=document.activeElement,a.focus())},isValidEventTrigger:function(e){var t=e.which||e.keyCode;return 1===t||t===this.keyboardKeys.ENTER||t===this.keyboardKeys.ESCAPE},getElementBySelector:function(t){var a=e("#"+t);return a.length||(a=e("."+t)),a.length?a:null}};Workopolis.AccessibilityEnhancer=t}(jQuery);